import{a as f}from"./vue-router-3222bb99.js";import{_ as y}from"./index-118448a2.js";import{aL as v,aB as a,L as n,M as t,aY as r,F as u,aJ as I,J as C,Y as P,bk as b,X as k}from"./@vue-1e6fac6c.js";import"./axios-aba6f0e0.js";import"./vue-axios-58a7c26f.js";import"./@ckeditor-b907fba5.js";import"./vue-d290faf7.js";import"./vee-validate-aae8f501.js";import"./@vee-validate-55db0f47.js";const{VITE_API_URL:p,VITE_API_PATH:m}={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_API_PATH:"kimi_project",BASE_URL:"/vue3-ECPlatform/final-mission/dist/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},L=`${p}/api/${m}/product`,h=`${p}/api/${m}/cart`,x={data(){return{product:{},cartData:[],cartTotalPrice:0,loadingItem:"",isLoading:!1,isCheckout:!1}},methods:{getProductInfo(){const{id:e}=this.$route.params;this.$http.get(`${L}/${e}`).then(o=>{this.product=o.data.product}).catch(o=>alert(o.message))},getCartData(){this.cartTotalPrice=0,this.$http.get(h).then(e=>{this.isLoading=!1,this.cartData=e.data.data.carts,this.cartData.forEach(o=>{this.cartTotalPrice+=o.total})}).catch(e=>alert(e.message))},addToCart(e){if(e=this.checkCartItemQty(e),!e)return;const o={product_id:e,qty:1};this.loadingItem=e,this.isLoading=!0,this.$http.post(h,{data:o}).then(i=>{alert(i.data.message),this.loadingItem="",this.getCartData()}).catch(i=>alert(i.message))},checkCartItemQty(e){const o=this.cartData.findIndex(i=>i.product.id===e);if(o<0||this.cartData[o].qty<=10)return e;alert("選購數量已超過上限，若有大量採購需求請另洽")}},components:{RouterLink:f},mounted(){this.getProductInfo(),this.getCartData()}},D={class:"h3"},T={class:"main"},E={class:"row"},V={class:"col-sm-8"},A={class:"row"},U=["src","alt"],R={class:"col-sm-4"},w={class:"d-flex flex-column justify-content-center",style:{height:"60vh"}},j={class:"list-unstyled"},B={class:"text-decoration-line-through fw-light"},S={class:"my-3"},N={class:"col-sm-3 me-3"},q=["src","alt"],F={class:"my-3 d-flex justify-content-end gap-1"};function H(e,o,i,J,s,_){var l,d;const g=v("RouterLink");return a(),n(u,null,[t("h2",D,r(s.product.title),1),t("div",T,[t("div",E,[t("div",V,[t("div",A,[t("img",{src:s.product.imageUrl,class:"rounded img-fluid object-fit-cover",alt:s.product.title,style:{height:"60vh"}},null,8,U)])]),t("div",R,[t("div",w,[t("div",null,[t("ul",j,[t("li",null,"菜式風格："+r(s.product.category),1),t("li",null,"地域風味："+r(s.product.areaCategory),1),t("li",null,"食材主題："+r(s.product.ingredientCategory),1),t("li",null,"份量單位："+r(s.product.unit),1),t("li",null,"內容物："+r(s.product.content),1),t("li",B," 原價："+r(s.product.origin_price)+"元 ",1),t("li",null,"售價："+r(s.product.price)+"元",1)])])])])]),t("div",S,[t("p",null,r(s.product.description),1)]),Array.isArray((l=s.product)==null?void 0:l.imagesUrl)&&((d=s.product)!=null&&d.imagesUrl.length)?(a(!0),n(u,{key:0},I(s.product.imagesUrl,c=>(a(),n("div",{class:"row my-3",key:"side-image"+c},[t("div",N,[t("img",{src:c,class:"rounded img-fluid object-fit-cover img-thumbnail",alt:s.product.title,style:{height:"40vh"}},null,8,q)])]))),128)):C("",!0)]),t("div",F,[P(g,{to:"/productsList",type:"button",class:"btn btn-outline-secondary btn-sm"},{default:b(()=>[k("回產品列表 ")]),_:1}),t("button",{type:"button",class:"btn btn-outline-warning btn-sm",onClick:o[0]||(o[0]=c=>_.addToCart(s.product.id))}," 加入菜籃車 ")])],64)}const Z=y(x,[["render",H]]);export{Z as default};
